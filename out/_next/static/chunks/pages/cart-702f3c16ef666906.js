(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{1742:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart",function(){return n(3125)}])},530:function(e,t,n){"use strict";var i=n(5893);n(7294),t.Z=e=>{let{variant:t="primary",className:n="",children:a,...r}=e;return(0,i.jsx)("button",{className:"".concat("inline-flex items-center gap-2 px-4 py-2 rounded font-semibold transition"," ").concat("primary"===t?"bg-dye-yellow text-black hover:brightness-95":"bg-transparent border border-dye-wood text-dye-black hover:bg-dye-gray-100"," ").concat(n),...r,children:a})}},3125:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var i=n(5893),a=n(7294),r=n(9008),s=n.n(r),c=n(530),d=n(3454);function o(){let[e,t]=(0,a.useState)([]);(0,a.useEffect)(()=>{fetch("/api/cart").then(e=>e.json()).then(t).catch(()=>t([]))},[]);let r=async()=>{let t=await fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:e})}),i=await t.json(),a=await n.e(465).then(n.bind(n,4465)),r=await a.loadStripe(d.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY||"");if(!r)throw Error("Stripe failed to load");await r.redirectToCheckout({sessionId:i.id})};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s(),{children:(0,i.jsx)("title",{children:"Carrinho â€” DyeShop"})}),(0,i.jsx)("main",{className:"min-h-screen px-6 py-12",children:(0,i.jsxs)("section",{className:"max-w-4xl mx-auto",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Seu carrinho"}),(0,i.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,i.jsxs)("div",{className:"p-4 bg-white rounded flex justify-between items-center",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-semibold",children:e.product.name}),(0,i.jsxs)("div",{className:"text-sm text-dye-gray-500",children:["Quantidade: ",e.quantity]})]}),(0,i.jsxs)("div",{children:["R$ ",(e.product.price*e.quantity).toFixed(2)]})]},e.id))}),(0,i.jsx)("div",{className:"mt-6 flex justify-end",children:(0,i.jsx)(c.Z,{onClick:r,children:"Finalizar compra"})})]})})]})}},9008:function(e,t,n){e.exports=n(3867)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=1742)}),_N_E=e.O()}]);