(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[426],{8313:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/orders",function(){return a(5903)}])},5903:function(e,s,a){"use strict";a.r(s),a.d(s,{__N_SSP:function(){return l},default:function(){return r}});var n=a(5893),d=a(7294),t=a(1664),i=a.n(t),l=!0;function r(e){let{orders:s}=e,[a,t]=d.useState(""),[l,r]=d.useState(""),[c,o]=d.useState([]),u=s.filter(e=>{let s=e.id.includes(a)||(e.customerEmail||e.user&&e.user.email||"").toLowerCase().includes(a.toLowerCase()),n=!l||e.status===l;return s&&n}),x=e=>o(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e]),m=async e=>{if(!c.length)return alert("Nenhum pedido selecionado");confirm("Atualizar ".concat(c.length," pedidos para status ").concat(e,"?"))&&(await fetch("/api/admin/orders/bulk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"updateStatus",ids:c,status:e})}),window.location.reload())},p=async()=>{let e=await fetch("/api/admin/orders/export"),s=new Blob([await e.text()],{type:"text/csv"}),a=URL.createObjectURL(s),n=document.createElement("a");n.href=a,n.download="orders.csv",n.click(),URL.revokeObjectURL(a)};return(0,n.jsx)("main",{className:"min-h-screen px-6 py-12",children:(0,n.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold",children:"Pedidos"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("input",{placeholder:"Buscar por id ou email",value:a,onChange:e=>t(e.target.value),className:"border px-3 py-2 rounded"}),(0,n.jsxs)("select",{value:l,onChange:e=>r(e.target.value),className:"border px-3 py-2 rounded",children:[(0,n.jsx)("option",{value:"",children:"Todos"}),(0,n.jsx)("option",{value:"pending",children:"pending"}),(0,n.jsx)("option",{value:"paid",children:"paid"}),(0,n.jsx)("option",{value:"fulfilled",children:"fulfilled"}),(0,n.jsx)("option",{value:"cancelled",children:"cancelled"}),(0,n.jsx)("option",{value:"refunded",children:"refunded"})]}),(0,n.jsx)("button",{className:"px-3 py-2 rounded border",onClick:p,children:"Exportar CSV"}),(0,n.jsxs)("div",{className:"dropdown",children:[(0,n.jsx)("button",{className:"px-3 py-2 rounded border",children:"A\xe7\xf5es em massa"}),(0,n.jsx)("div",{className:"absolute bg-white rounded shadow mt-2 p-2 hidden"})]})]})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,n.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,n.jsx)("input",{type:"checkbox",onChange:()=>o(u.map(e=>e.id))})," Selecionar todos (",u.length,")"]}),(0,n.jsx)("button",{className:"px-3 py-2 rounded border",onClick:()=>m("fulfilled"),children:"Marcar fulfilled"}),(0,n.jsx)("button",{className:"px-3 py-2 rounded border",onClick:()=>m("cancelled"),children:"Marcar cancelled"})]}),u.map(e=>(0,n.jsxs)("div",{className:"p-4 bg-white rounded flex justify-between items-center",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("input",{type:"checkbox",checked:c.includes(e.id),onChange:()=>x(e.id)}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"font-semibold",children:["Pedido ",e.id]}),(0,n.jsx)("div",{className:"text-sm text-dye-gray-500",children:e.customerEmail||e.user&&e.user.email||"â€”"}),(0,n.jsx)("div",{className:"text-sm text-dye-gray-500",children:new Date(e.createdAt).toLocaleString()})]})]}),(0,n.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,n.jsxs)("div",{className:"font-semibold",children:["R$ ",e.total.toFixed(2)]}),(0,n.jsx)("div",{className:"px-3 py-1 rounded border text-sm",children:e.status}),(0,n.jsx)(i(),{href:"/admin/orders/".concat(e.id),className:"px-3 py-2 rounded border",children:"Ver"})]})]},e.id))]})]})})}}},function(e){e.O(0,[664,888,774,179],function(){return e(e.s=8313)}),_N_E=e.O()}]);