(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[209],{7510:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/products",function(){return s(5640)}])},5640:function(e,n,s){"use strict";s.r(n),s.d(n,{__N_SSP:function(){return o},default:function(){return d}});var t=s(5893),c=s(7294),a=s(1664),i=s.n(a),o=!0;function d(e){let{products:n}=e,[s,a]=c.useState(""),[o,d]=c.useState([]),r=n.filter(e=>e.name.toLowerCase().includes(s.toLowerCase())||e.slug.toLowerCase().includes(s.toLowerCase())),l=e=>d(n=>n.includes(e)?n.filter(n=>n!==e):[...n,e]),u=async()=>{if(!o.length)return alert("Nenhum produto selecionado");confirm("Excluir ".concat(o.length," produtos?"))&&(await fetch("/api/admin/products/bulk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"delete",ids:o})}),window.location.reload())},x=async()=>{let e=await fetch("/api/admin/products/export"),n=new Blob([await e.text()],{type:"text/csv"}),s=URL.createObjectURL(n),t=document.createElement("a");t.href=s,t.download="products.csv",t.click(),URL.revokeObjectURL(s)};return(0,t.jsx)("main",{className:"min-h-screen px-6 py-12",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Gerenciar Produtos"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{placeholder:"Buscar...",value:s,onChange:e=>a(e.target.value),className:"border px-3 py-2 rounded"}),(0,t.jsx)("button",{className:"bg-dye-yellow px-3 py-2 rounded text-black font-semibold",onClick:()=>window.location.href="/admin/products/new",children:"Novo produto"}),(0,t.jsx)("button",{className:"px-3 py-2 rounded border",onClick:x,children:"Exportar CSV"}),(0,t.jsx)("button",{className:"px-3 py-2 rounded border",onClick:u,children:"Excluir selecionados"})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"flex items-center gap-4 mb-2",children:(0,t.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",onChange:()=>d(r.map(e=>e.id))})," Selecionar todos (",r.length,")"]})}),r.map(e=>(0,t.jsxs)("div",{className:"p-4 bg-white rounded flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("input",{type:"checkbox",checked:o.includes(e.id),onChange:()=>l(e.id)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-semibold",children:e.name}),(0,t.jsxs)("div",{className:"text-sm text-dye-gray-500",children:[e.slug," \xb7 R$ ",e.price.toFixed(2)]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i(),{href:"/admin/products/".concat(e.id),className:"px-3 py-2 rounded border",children:"Editar"}),(0,t.jsx)("button",{className:"px-3 py-2 rounded border",onClick:async()=>{confirm("Excluir produto?")&&(await fetch("/api/admin/products/".concat(e.id),{method:"DELETE"}),window.location.reload())},children:"Excluir"})]})]},e.id))]})]})})}}},function(e){e.O(0,[664,888,774,179],function(){return e(e.s=7510)}),_N_E=e.O()}]);